var Setting = 
[
    {
        "Left_Title_img":"img/pic061.png",
        "Left_YT_ID":["JIL9FdatxsA"],
        "Right_Title_img":"img/pic062.png",
        "Right_YT_ID":["4-BtQSyaOd0"],
        "TabImg": "img/bookmark011.png",
        "TabImg_Active": "img/bookmark021.png",
        "TabType": "國語",
        "Type": "低年級"
    },
    {
        "Left_Title_img":"img/pic063.png",
        "Left_YT_ID":["0G90JmCCWW0"],
        "Right_Title_img":"img/pic064.png",
        // "Right_YT_ID":["5fy1pQv22PA","_WMgBPoy5Uk","BbwJIs493IE","oLnFGLF2WiY","W_Hajm9C7QU","dfoQonGWxAU","2HmXInsRV1M","KCveAzW6_Rw","Fjk28X2iS-8","6ULbk269iEs","0EzykimyKMY","yMLat7eT_tQ"], //3.2移除Fjk28X2iS-8 低年級-教材搶先看-國語-替換紅框處—教材影音(低)連結-刪除後四支影片
        "Right_YT_ID":["5fy1pQv22PA","_WMgBPoy5Uk","BbwJIs493IE","oLnFGLF2WiY","W_Hajm9C7QU","dfoQonGWxAU","2HmXInsRV1M","KCveAzW6_Rw","6ULbk269iEs","0EzykimyKMY","yMLat7eT_tQ"],
        "TabImg": "img/bookmark011.png",
        "TabImg_Active": "img/bookmark021.png",
        "TabType": "國語",
        "Type": "低年級"
    },
    {
        "Left_Title_img":"img/pic01.png",
        "Left_YT_ID":["d68cRN4VnYI"],
        "Right_Title_img":"img/pic02.png",
        "Right_YT_ID":["jvIL8K-Pkpk","L0CTHe4uJyQ","kTSnHLHAyCw","hWDPdNzGzTs","GM7Tb_8Dalw","DUQkHe5OCP8"],
        "TabImg": "img/bookmark012.png",
        "TabImg_Active": "img/bookmark022.png",
        "TabType": "數學",
        "Type": "低年級"
    },
    {
        "Left_Title_img":"img/pic01.png",
        "Left_YT_ID":["oFSSvY5MIoI"],
        "Right_Title_img":"img/pic02.png",
        // "Right_YT_ID":["svoOFhrvSBQ","D7545N3C66E","bMJY1MePF00","KXHXq8HAiao","A6vdfXIh7io"], //3.2移除bMJY1MePF00 低年段-教材搶先看-生活-刪除紅框處-教材影音第三支我愛泡泡
        "Right_YT_ID":["svoOFhrvSBQ","D7545N3C66E","KXHXq8HAiao","A6vdfXIh7io"],
        "TabImg": "img/bookmark013.png",
        "TabImg_Active": "img/bookmark023.png",
        "TabType": "生活",
        "Type": "低年級"
    },
    {
        "Left_Title_img":"img/pic01.png",
        "Left_YT_ID":["LiYLHjPY7_8"],
        "Right_Title_img":"img/pic02.png",
        "Right_YT_ID":["d8LqPR6d_Gk","V-NGvivq3Nw","HG8hQgTKAgU","z7J-tntqe3A","psbQLaW91no","th8c-EJhaBI","vKimt-htfdo","ISApHnhAs_o"],
        "TabImg": "img/bookmark011.png",
        "TabImg_Active": "img/bookmark021.png",
        "TabType": "國語",
        "Type": "中年級"
    },
    {
        "Left_Title_img":"img/pic01.png",
        "Left_YT_ID":["ji94WdpL3BE"],
        "Right_Title_img":"img/pic02.png",
        "Right_YT_ID":["vgP-OUzz0Mc","z4yK1lzTBaA","g_xYMVChVJ4","_65xTU7MvHI","Buw3CFvEFSo","h_pkfyXuXv0"],
        "TabImg": "img/bookmark012.png",
        "TabImg_Active": "img/bookmark022.png",
        "TabType": "數學",
        "Type": "中年級"
    },
    {
        "Left_Title_img":"img/pic01.png",
        "Left_YT_ID":["mvH3SW8c_DA"],
        "Right_Title_img":"img/pic02.png",
        "Right_YT_ID":["o4EVF3KXCqw","NSTli0zmFls","LIu098hmjE8","2uJ6M8ORxhY","lqaBw3t6y74","nmCfvoN8aXs","4HmQFUSWKB4"],
        "TabImg": "img/bookmark011.png",
        "TabImg_Active": "img/bookmark021.png",
        "TabType": "國語",
        "Type": "高年級"
    },
    {
        "Left_Title_img":"img/pic01.png",
        "Left_YT_ID":["YkTQTPGJRTY"],
        "Right_Title_img":"img/pic02.png",
        "Right_YT_ID":["Rqinl58iLKQ","WWHP6qfP-JU","XqZMKyzIBL0"],
        "TabImg": "img/bookmark012.png",
        "TabImg_Active": "img/bookmark022.png",
        "TabType": "數學",
        "Type": "高年級"
    },
    {
        "Left_Title_img":"img/pic065.png",
        "Left_YT_ID":["nMyUXT88cJM"],
        "Right_Title_img":"img/pic066.png",
        // "Right_YT_ID":["HNsJ5g4tNXw","cm9sRPZSQAE","zg54OfQ7WkI","kHkATKytO_w","PuIYPF_DVig","1GSSgGpFVDk"], // 3.2移除 中年級-教材搶先看-自然-刪除第五支搖搖冰影片
        "Right_YT_ID":["HNsJ5g4tNXw","cm9sRPZSQAE","zg54OfQ7WkI","kHkATKytO_w","6ABf65toc3w","1GSSgGpFVDk"], 
        "TabImg": null,
        "TabImg_Active": null,
        "TabType": null,
        "Type": "自然"
    },
    {
        "Left_Title_img":"img/pic067.png",
        "Left_YT_ID":["M6YEpUhjrfI"],
        "Right_Title_img":"img/pic068.png",
        // "Right_YT_ID":["jNx_Di_Dixs","2GJbDiXM0cE","Qsp1-rdm88M"], // 3.2移除 高年級－教材搶先看－自然-刪除第三支水受熱後的流動情形影片
        "Right_YT_ID":["jNx_Di_Dixs","2GJbDiXM0cE","dzgwsrqtRzk"],
        "TabImg": null,
        "TabImg_Active": null,
        "TabType": null,
        "Type": "自然"
    },
    {
        "Left_Title_img":"img/pic065.png",
        "Left_YT_ID":["vrxUMAdWGWI"],
        "Right_Title_img":"img/pic066.png",
        // "Right_YT_ID":["ftDempnh7Fo","vlaCQzWzbM8","T2n1gDUE9Fk","E-MR0RrPwFI"], // 3.2移除 社會-教材搶先看-社會-教材影音(中)刪除後2支引導動畫
        "Right_YT_ID":["ftDempnh7Fo","vlaCQzWzbM8"],
        "TabImg_Active": null,
        "TabType": null,
        "Type": "社會"
    },
    {
        "Left_Title_img":"img/pic067.png",
        "Left_YT_ID":["5gJrUJAEnJU"],
        "Right_Title_img": null,
        "Right_YT_ID": null,
        "TabImg": null,
        "TabImg_Active": null,
        "TabType": null,
        "Type": "社會"
    },
]
var Tabs = [];
jQuery(document).ready(function ($) {

    var str = getUrlParameter("t");

    var Add = "";
    var AddTabs = "";
    var YTSetting = [];
    var DoAddTab = true;

    for (var i in Setting) {
        if(Setting[i].Type == str){

            if (Setting[i].TabType != null) {
                DoAddTab = true;
                Tabs.forEach(item => { if (item.TabType == Setting[i].TabType) { DoAddTab = false; } });
                if (DoAddTab) {
                    var x = {};
                    x.TabImg = Setting[i].TabImg;
                    x.TabImg_Active = Setting[i].TabImg_Active;
                    x.TabType = Setting[i].TabType;
                    Tabs.push(x);
                }
            }
            YTSetting.push(Setting[i]);
            Add = "";
            var ID = "YT_L" + (i + 1).toString();

            //Add +=  '<div class="carousel-item  active">';
            Add += '<div class="row RowContent" style="display:none" type="' + Setting[i].TabType + '">'

            Add +='<div class="carousel-item  active">'
            Add += '<div class="row">'
            //左邊
            Add += '    <div class="col-xl-6  col-lg-12   col-md-12 col-12" style="margin-bottom: 3rem;">'
            Add += '        <img class="YTTitle" src="'+ Setting[i].Left_Title_img +'">'
            Add += '        <div id="'+ ID +'" class="YT carousel slide" data-bs-ride="false" data-bs-interval="false">'
            Add += '           <div class="carousel-indicators">'
            //下方圓圈
            for(var j in Setting[i].Left_YT_ID){
                if (j == 0){
                    Add += '                <button type="button" class="carouselBtn active"'
                }
                else{
                    Add += '                <button type="button" class="carouselBtn"'
                }
                Add += '                      data-bs-target="#'+ ID +'" data-bs-slide-to="'+ j +'"'
                if (j == 0){
                    Add += '                      aria-current="true" '
                }
                Add += '                      aria-label="Slide '+ (j + 1) +'"></button>'
             
            }
            Add += '            </div>'
            Add += '             <div class="carousel-inner">'
            for(var j in Setting[i].Left_YT_ID){
                var YTID = Setting[i].Left_YT_ID[j];
                if (j == 0){
                     Add += '                 <div class="carousel-item ratio  ratio-16x9 active">'
                }
                else{
                    Add += '                 <div class="carousel-item ratio  ratio-16x9">'
                }
                Add += '                     <iframe'
                Add += '                         src="https://www.youtube.com/embed/'+ YTID +'?enablejsapi=1"'
                Add += '                         srcdoc="<style>*{padding:0;margin:0;overflow:hidden}html,body{height:100%}img,span{position:absolute;width:100%;top:0;bottom:0;margin:auto}span{height:1.5em;text-align:center;font:48px/1.5 sans-serif;color:white;text-shadow:0 0 0.5em black}</style>'
                Add += '                        <a href=https://www.youtube.com/embed/'+ YTID +'?autoplay=1 target=\'_blank\' ><img src=https://img.youtube.com/vi/'+ YTID +'/hqdefault.jpg ><span>▶</span></a>"'
                Add += '                         id="'+ YTID +'" title="YouTube video player"'
                Add += '                         frameborder="0" allowfullscreen></iframe>'
                Add += '                </div>'

            }
            Add += '             </div>'
            Add += '         <div class="carousel-control-prev">'
            Add += '                 <span class="carousel-control-prev-icon" aria-hidden="true"'
            Add += '                     data-bs-target="#' +ID +'" data-bs-slide="prev"></span>'
            Add += '             </div>'
            Add += '             <div class="carousel-control-next" type="button">'
            Add += '                 <span class="carousel-control-next-icon" aria-hidden="true"'
            Add += '                     data-bs-target="#' +ID +'" data-bs-slide="next"></span>'
            Add += '             </div>'
            Add += '         </div>'
            Add += '     </div>'

            //右邊
            ID = "YT_R" + (i + 1).toString();
            Add += '    <div class="col-xl-6  col-lg-12   col-md-12 col-12" style="margin-bottom: 3rem;">'
            Add += '        <img class="YTTitle" src="'+ Setting[i].Right_Title_img +'">'
            Add += '        <div id="'+ ID +'" class="YT carousel slide" data-bs-ride="false" data-bs-interval="false">'
            Add += '           <div class="carousel-indicators">'
            //下方圓圈
            for(var j in Setting[i].Right_YT_ID){
                if (j == 0){
                    Add += '                <button type="button" class="carouselBtn active"'
                }
                else{
                    Add += '                <button type="button" class="carouselBtn"'
                }
                Add += '                      data-bs-target="#'+ ID +'" data-bs-slide-to="'+ j +'"'
                if (j == 0){
                    Add += '                      aria-current="true" '
                }
                Add += '                      aria-label="Slide '+ (j + 1) +'"></button>'

            }
            Add += '            </div>'
            Add += '             <div class="carousel-inner">'
            for(var j in Setting[i].Right_YT_ID){
                var YTID = Setting[i].Right_YT_ID[j];
                if (j == 0){
                     Add += '                 <div class="carousel-item ratio  ratio-16x9 active">'
                }
                else{
                    Add += '                 <div class="carousel-item ratio  ratio-16x9">'
                }
                Add += '                     <iframe'
                Add += '                         src="https://www.youtube.com/embed/'+ YTID +'?enablejsapi=1"'
                Add += '                         srcdoc="<style>*{padding:0;margin:0;overflow:hidden}html,body{height:100%}img,span{position:absolute;width:100%;top:0;bottom:0;margin:auto}span{height:1.5em;text-align:center;font:48px/1.5 sans-serif;color:white;text-shadow:0 0 0.5em black}</style>'
                Add += '                        <a href=https://www.youtube.com/embed/'+ YTID +'?autoplay=1 target=\'_blank\' ><img src=https://img.youtube.com/vi/'+ YTID +'/hqdefault.jpg ><span>▶</span></a>"'
                Add += '                         id="'+ YTID +'" title="YouTube video player"'
                Add += '                         frameborder="0" allowfullscreen></iframe>'
                Add += '                </div>'
              
            }
            Add += '             </div>'
            Add += '         <div class="carousel-control-prev">'
            Add += '                 <span class="carousel-control-prev-icon" aria-hidden="true"'
            Add += '                     data-bs-target="#'+ ID +'" data-bs-slide="prev"></span>'
            Add += '             </div>'
            Add += '             <div class="carousel-control-next" type="button">'
            Add += '                 <span class="carousel-control-next-icon" aria-hidden="true"'
            Add += '                     data-bs-target="#'+ ID+'" data-bs-slide="next"></span>'
            Add += '             </div>'
            Add += '         </div>'
            Add += '     </div>'
            Add += '     </div>'
            $(".divContent").append(Add);
        }
       
	}
    //console.log(Add);
 
    if (Tabs.length > 0) {
        for (var i in Tabs) {
            if (i == 0) {
                AddTabs += '<img class="col-4 Tabs"  Img="' + Tabs[i].TabImg + '" ActiveImg="' + Tabs[i].TabImg_Active + '"  src="' + Tabs[i].TabImg_Active + '" type="' + Tabs[i].TabType + '">';
            }
            else {
                AddTabs += '<img class="col-4 Tabs"  Img="' + Tabs[i].TabImg + '" ActiveImg="' + Tabs[i].TabImg_Active + '"  src="' + Tabs[i].TabImg + '" type="' + Tabs[i].TabType + '">';
            }
        }
        $(".ImgTabs").append(AddTabs);


        $(".RowContent[type='" + Tabs[0].TabType + "']").show();

        $(".Tabs").mouseup(function (event) {
            $(".RowContent").hide();
            $(".RowContent[type='" + $(this).attr("type") + "']").show();
            //先都不選
            $(".Tabs").each(function () {
                $(this).attr("src", $(this).attr("Img"));
            });
            $(this).attr("src", $(this).attr("ActiveImg"));
        });
    }
    else{
        $(".RowContent").show();
    }


    $(".list-group-item").mouseup(function (event) {
		var hash = this.hash;
		console.log($(hash).offset().top);
		var PID = $(this).attr("PID");
		var subid = $(this).attr("subID");
		if($(PID).hasClass("collapse")){
			if(!$(PID).hasClass("show")){
				$(PID).addClass("show");

				var index = $(".Foldbtn[data-bs-target='"+ PID+"']").attr("index");
				$(".header" + index).css("background-color", "#008CD4");
				$(".Fold" + index).css("background-color", "#008CD4");
				$($($(".Foldbtn[data-bs-target='"+ PID+"']").parent().parent()).children(".FoldTexts")).css("opacity", 0);
				$(".Foldbtn" + index).addClass("FoldbtnActive");
				$('html, body').animate({
					scrollTop: $(hash).offset().top
			  }, 300, function(){
					window.location.hash = hash;
			  }); 

			}
		}
		if(subid != undefined){
			var subIndex =parseInt( $(this).attr("subIndex"));
			$(subid+ "> div > div").removeClass("active");
			$($(subid+ "> div > div")[subIndex]).addClass("active");
			$(".ClassItem[data-bs-target='"+subid+"']").removeClass("ClassItemActive");
			$(".ClassItem[data-bs-target='"+subid+"'][data-bs-slide-to='"+ subIndex+"']").addClass("ClassItemActive");
		}
		$(".list-group-item").removeClass("list-group-item-active");
		$(this).addClass("list-group-item-active");
	});
   // $(".SlectUnitBoxDiv > ul").append(lis);
})

function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
      sURLVariables = sPageURL.split('&'),
      sParameterName,
      i;

    for (i = 0; i < sURLVariables.length; i++) {
      sParameterName = sURLVariables[i].split('=');

      if (sParameterName[0] === sParam) {
        return sParameterName[1] === undefined ? true : sParameterName[1];
      }
    }
  };
