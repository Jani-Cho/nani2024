var Setting =
    [
        // { //3.2移除
        //     "Title": "【NEW】派測驗功能全新登場",
        //     "Items":
        //     [
        //         {
        //             "YT_ID": "B-d_KRg4J6s",
        //             "Title":"▶必知優點1：自動出卷",
        //             "Text": "內建電子書各章節內，自動出卷。不用切換視窗，隨點即派超級快。",
        //             "TitleImg":"img/resource/5OneBook/1.png",
        //         },
        //         {
        //             "YT_ID": "etXuNKX6r5k",
        //             "Title":"▶必知優點2：三種程度",
        //             "Text": "獨家提供三種程度考卷，速測也可以差異化評量。",
        //             "TitleImg":"img/resource/5OneBook/2.png",
        //         },
        //         {
        //             "YT_ID": "ew-JHiy_Gx0",
        //             "Title":"▶必知優點3：測驗分析",
        //             "Text": "測驗後有詳盡班級測驗分析立刻掌握班級學習成果。",
        //             "TitleImg":"img/resource/5OneBook/3.png",
        //         },
        //         {
        //             "YT_ID": "kK0YnBPXOtE",
        //             "Title":"▶【立即派】免建班快速派題",
        //             "Text": "免建班與匯入資料，學生使用行動載具，直接掃描QRCode快速進行評量。",
        //             "TitleImg":"img/resource/5OneBook/4.png",
        //         },
        //         {
        //             "YT_ID": "2H_2h8WZH3w",
        //             "Title":"▶【OneLink派】快速派測驗給指定班級",
        //             "Text": "結合南一OneLink，自動導入老師已建置之班級，可輕鬆派發測驗。教師可擁有完整的試卷與成績管理。",
        //             "TitleImg":"img/resource/5OneBook/5.png",
        //         }
        //     ]
        // },
        {
            "Title": "【NEW】業界最強班級紀錄功能",
            "Items":
            [
                {
                    // "YT_ID": "HFqJG7WK3J4",
                    "YT_ID": "Wpg1q-8yTuo", //3.2修改
                    "Title":"▶一個帳號、記錄同步",
                    "Text": "班級紀錄自動存，同步顯示在其他裝置，不用另存、上傳雲端，備課最方便！",
                    "TitleImg":"img/resource/5OneBook/6.png",
                }

            ]
        },
        // {//3.2移除
        //     "Title": "【NEW】老師！我們把電子書變大了！",
        //     "Items":
        //     [
        //         {
        //             "YT_ID": "vvP-ME6m7Lk",
        //             "Title":"▶電子書放大功能 倍率變更大了",
        //             "Text": "頁面可放大16倍，業界最大！生字教學超清楚，不怕後排孩子看不到。",
        //             "TitleImg":"img/resource/5OneBook/7.png",
        //         }

        //     ]
        // },
        // { //3.2移除
        //     "Title": "【NEW】OneBook APP 功能優化 ",
        //     "Items":
        //     [
        //         {
        //             "YT_ID": "OgtGHcdKK50",
        //             "Title":"▶新升級1：分段下載",
        //             "Text": "各科皆可分章/分課下載，減少下載容量，釋放更多記憶體。",
        //             "TitleImg":"img/resource/5OneBook/8.png",
        //         },
        //         {
        //             "YT_ID": "4Tg8blPjMjg",
        //             "Title":"▶新升級2：自動更新提醒",
        //             "Text": "點擊書本後，自動貼心提醒內容更新！",
        //             "TitleImg":"img/resource/5OneBook/10.png",
        //         }
        //     ]
        // },
        {
            "Title": "【NEW】真人智能客服 隆重登場",
            "Items":
            [
                {
                    // "YT_ID": "PvyoNDgsCUU",
                    "YT_ID": "PgfjFnuuMjw", //3.2修改
                    "Title":"▶真人智能客服即時回應產品問題",
                    "Text": "一對一真人回應，貼心服務0距離。傾聽使用者回饋，精準導入產品開發",
                    "TitleImg":"img/resource/5OneBook/11.png",
                }

            ]
        },
        { // 3.2新增
            "Title": "【NEW】獨家NaniBook課堂互動",
            "Items":
            [
                {
                    "YT_ID": "",
                    "Title":"必知優點1：課堂快問快答",
                    "Text": "電子書快速出題，輕鬆派發自訂試題給全班。",
                    "TitleImg":"img/resource/5OneBook/答題工具1.png",
                    "TitleImg2":"img/resource/5OneBook/答題工具2.png",
                },
                {
                    "YT_ID": "",
                    "Title":"必知優點2：分組答題",
                    "Text": "支援分組回答、答題狀況即時統機。",
                    "TitleImg":"img/resource/5OneBook/NaniBook3.png",
                    "TitleImg2":"img/resource/5OneBook/NaniBook5.png",
                },
                {
                    "YT_ID": "",
                    "Title":"必知優點3：分組觀摩",
                    "Text": "共享學習成果，提供學生互相觀摩學習的機會。",
                    "TitleImg":"img/resource/5OneBook/NaniBook6.png",
                    "TitleImg2":"img/resource/5OneBook/NaniBook7.png",
                },
                {
                    "YT_ID": "",
                    "Title":"必知優點4：派發筆記",
                    "Text": "提供學生筆紀、學習單，輕鬆進行課堂演練與複習。",
                    "TitleImg":"img/resource/5OneBook/NaniBook11.png",
                    "TitleImg2":"img/resource/5OneBook/NaniBook12.png",
                }

            ]
        },
        { // 3.2新增
            "Title": "【改版】電子書畫筆功能貼心升級",
            "Items":
            [
                {
                    "YT_ID": "mWPDXm8U68M",
                    "Title":"優化畫筆操作，16色新登場",
                    "Text": "點一下畫筆即可進行書寫，再點一下呼叫畫筆面板。",
                    "TitleImg":"img/resource/5OneBook/NaniBook8.png",
                }

            ]
        },
        { // 3.2新增
            "Title": "【改版】輕鬆返回前筆動作",
            "Items":
            [
                {
                    "YT_ID": "",
                    "Title":"新增雙按鍵:回復、取消回復",
                    "Text": "一秒救回上一筆動作，包含畫記、便利貼、圖片皆可一鍵復原。",
                    "TitleImg":"img/resource/5OneBook/NaniBook9.png",
                    "TitleImg2":"img/resource/5OneBook/NaniBook10.png",
                }

            ]
        },
        
    ]
var Tabs = [];
jQuery(document).ready(function ($) {

    var str = getUrlParameter("t");
    console.log(str);
    var Add = "";
    var AddTabs = "";
    var DoAddTab = true;

    for (var i in Setting) {
        /*if (Setting[i].Type == str) {
            if (Setting[i].TabType != null) {
                DoAddTab = true;
                Tabs.forEach(item => { if (item.TabType == Setting[i].TabType) { DoAddTab = false; } });
                if (DoAddTab) {
                    var x = {};
                    x.TabImg = Setting[i].TabImg;
                    x.TabImg_Active = Setting[i].TabImg_Active;
                    x.TabType = Setting[i].TabType;
                    Tabs.push(x);
                }
            }
            console.log(Setting[i]);*/

            var stri = i.toString();

            //Header
            Add += '<div class="row" style="margin-left:0;margin-right:0;">'
            Add += '  <div class="card-header header'+ stri +' Btn" id="heading'+ stri +'" data-bs-toggle="collapse" data-bs-target="#collapse'+ stri +'"'
            Add += '    aria-controls="collapse'+ stri +'" index="'+ stri +'" aria-expanded="false">'
            Add += '    <div class="row justify-content-center" style="z-index: 1;">'
            Add += '        <div class="col-lg-12 Fold Fold2">'
            Add += '            <div class="row align-items-center">'
            Add += '                <div class="col-xl-11 col-md-11 col-sm-10 col-10 FoldTexts">'
            Add +=                   '<span style="margin-left:3vmin;">'+ Setting[i].Title +'</span>'
            Add += '                </div>'
            Add += '                <div class="col-lg-1 col-md-1 col-sm-2 col-2" style="text-align: center;">'
            Add += '                    <button class="btn Foldbtn Foldbtn'+ stri +'" type="button" data-bs-toggle="collapse"'
            Add += '                        data-bs-target="#collapse'+ stri +'" aria-expanded="false" aria-controls="collapse'+ stri +'"'
            Add += '                        index="'+ stri +'">'
            Add += '                        <img src="img/x1.png">'
            Add += '                    </button>'
            Add += '                </div>'

            Add += '            </div>'
            Add += '        </div>'
            Add += '    </div>'
            Add += '  </div>'
          

            Add += '<div id="collapse'+ stri +'" class="collapse collapse'+ stri +' panel-heading">'
            Add += '  <div class="card-body">'
            for (var j in Setting[i].Items) {
                var TYID = Setting[i].Items[j].YT_ID;

                Add += '<div class="row RowContent">'
                Add += '  <div class="row">'
                Add += '    <div class="col-lg-12 divTitle">'
                Add +=         Setting[i].Items[j].Title
                Add += '    </div>'
                Add += '  </div>'
                Add += '  <div class="row">'    
                Add += '    <div class="col-lg-12 divText">'
                Add +=         Setting[i].Items[j].Text
                Add += '    </div>'  
                Add += '  </div>'  
                Add += '<div class="row">'   
                Add += '<div class="carousel-item  active">'
                Add += '    <div class="row justify-content-center">'
                      
                Add += '        <img class="col-xl-6  col-lg-12 col-md-12 col-12 divYT" src="'+ Setting[i].Items[j].TitleImg +'">'
                if (Setting[i].Items[j].TitleImg2) {
                Add += '        <img class="col-xl-6  col-lg-12 col-md-12 col-12 divYT" src="'+ Setting[i].Items[j].TitleImg2 +'">'
                }
                if (TYID) {
                Add += '       <div class="col-xl-6 col-lg-12 col-md-12 col-12 divYT">'
    
                Add += '               <div class="carousel-inner">'
                Add += '                    <div class="carousel-item ratio  ratio-16x9 active">'
                Add += '                        <iframe'
                Add += '                            src="https://www.youtube.com/embed/'+ TYID +'?enablejsapi=1"'
                Add += '                            srcdoc="<style>*{padding:0;margin:0;overflow:hidden}html,body{height:100%}img,span{position:absolute;width:100%;top:0;bottom:0;margin:auto}span{height:1.5em;text-align:center;font:48px/1.5 sans-serif;color:white;text-shadow:0 0 0.5em black}</style>'
                Add += '                            <a href=https://www.youtube.com/embed/'+ TYID +'?autoplay=1 target=\'_blank\' ><img src=https://img.youtube.com/vi/'+ TYID +'/hqdefault.jpg ><span>▶</span></a>"'
                Add += '                            id="'+ TYID +'" title="YouTube video player"'
                Add += '                            frameborder="0" allowfullscreen></iframe>'
                Add += '                    </div>'              
                Add += '                </div>'
    
                Add += '            </div>'
            }
                Add += '        </div>'
                Add += '        <div class="col-xl-12 col-lg-12 col-md-12 col-12 Line">'
                Add += '    </div>'
                Add += '</div>'
                Add += '</div>'
                Add += '</div>'
            }
            Add += '  </div>'
            Add += '</div>'
            Add += '</div>'
            

        //}

    }
    $(".divContent").append(Add);
    /*if (Tabs.length > 0) {
        for (var i in Tabs) {
            if (i == 0) {
                AddTabs += '<img class="col-4 Tabs"  Img="' + Tabs[i].TabImg + '" ActiveImg="' + Tabs[i].TabImg_Active + '"  src="' + Tabs[i].TabImg_Active + '" type="' + Tabs[i].TabType + '">';
            }
            else {
                AddTabs += '<img class="col-4 Tabs"  Img="' + Tabs[i].TabImg + '" ActiveImg="' + Tabs[i].TabImg_Active + '"  src="' + Tabs[i].TabImg + '" type="' + Tabs[i].TabType + '">';
            }
        }
        $(".ImgTabs").append(AddTabs);


        $(".RowContent[type='" + Tabs[0].TabType + "']").show();

        $(".Tabs").mouseup(function (event) {
            $(".RowContent").hide();
            $(".RowContent[type='" + $(this).attr("type") + "']").show();
            //先都不選
            $(".Tabs").each(function () {
                $(this).attr("src", $(this).attr("Img"));
            });
            $(this).attr("src", $(this).attr("ActiveImg"));
        });
    }
    else{
        $(".RowContent").show();
    }*/

    $(".card-header").mouseup(function (event) {
		var index = $(this).attr("index");
        console.log(index);
		if ($(".collapse" + index).hasClass("show")) {

			$(".Foldbtn" + index +" > img").attr("src","img/x1.png")//.removeClass("FoldbtnActive");		
            $(".Foldbtn" + index).removeClass("FoldbtnActive");		
			/*$($($(".Foldbtn" + index).parent().parent()).children(".FoldTexts")).css("opacity", 1);*/
		}
		else {
			/*$($($(".Foldbtn" + index).parent().parent()).children(".FoldTexts")).css("opacity", 0);*/
			//$(".Foldbtn" + index).addClass("FoldbtnActive");
            $(".Foldbtn" + index +" > img").attr("src","img/x2.png")

		}
	});

})

function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
        }
    }
};
